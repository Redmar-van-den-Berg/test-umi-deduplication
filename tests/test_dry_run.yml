- name: dry-run-vanilla
  tags:
    - dry-run
  command: >
    snakemake
      --dryrun
      --reason
      --printshellcmds
      --config pepfile=tests/pep/project_config.yaml
      --snakefile Snakefile
  stdout:
    contains:
      - sample1/concat/forward.fastq.gz
      - sample1/umi-trie/forward_dedup.fastq.gz

- name: dry-run-subsamples
  tags:
    - dry-run
  command: >
    snakemake
      --dryrun
      --reason
      --printshellcmds
      --config pepfile=tests/pep/project_subsamples.yaml
      --snakefile Snakefile
  stdout:
    contains:
      - sample1/concat/forward.fastq.gz
      - sample2/concat/forward.fastq.gz
      - sample1/umi-trie/forward_dedup.fastq.gz
      - sample2/umi-trie/forward_dedup.fastq.gz
    contains_regex:
      # Test if specifying multiple fastq files using subsamples is handled
      - "cp tests/data/micro_R1.fq.gz tests/data/micro_R1.fq.gz sample1/concat/forward.fastq.gz"
      - "cp tests/data/micro_R1.fq.gz sample2/concat/forward.fastq.gz"
